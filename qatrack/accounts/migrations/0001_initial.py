# Generated by Django 2.1.5 on 2019-02-06 16:06
import secrets
from django.contrib.auth.hashers import make_password
from django.db import migrations


def make_random_password(length=10, allowed_chars='abcdefghjkmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ23456789'):
    return ''.join(secrets.choice(allowed_chars) for i in range(length))
    

def update_internal_pass(apps, schema):
    User = apps.get_model("auth", "User")
    user = User.objects.get(username="QATrack+ Internal")
    user.password = make_password(make_random_password())
    # user.password = make_password(User.objects.make_random_password())
    user.save()


class Migration(migrations.Migration):

    dependencies = [
        ('qa', '0030_auto_20190129_2156'),
    ]

    operations = [
        migrations.RunPython(update_internal_pass, lambda a, s: None)
    ]
